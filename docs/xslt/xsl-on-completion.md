---
description: Происходит внутри xsl iterate для определения обработки, которая будет выполняться, когда входная последовательность будет исчерпана
---

# xsl:on-completion

Встречается в [`xsl:iterate`](xsl-iterate.md) для определения обработки, которая будет выполняться, когда входная последовательность будет исчерпана.

_Доступно в XSLT 3.0. Начиная с Saxon 9.8, доступен во всех редакциях. Реализовано в Saxon-PE и Saxon-EE начиная с Saxon 9.6._

-   **Содержимое**: _sequence-constructor_
-   **Допустимые родительские элементы**: [`xsl:iterate`](xsl-iterate.md)

## Атрибуты

`select?`
: _expression_
: Эффект инструкции может быть определен либо выражением в необязательном атрибуте `select`, либо вложенным конструктором последовательности.

## Заметки по реализации Saxon

Правило, согласно которому `xsl:on-completion` выполняется без элемента контекста, впервые было реализовано в Saxon 9.8.

В ранних рабочих проектах XSLT 3.0 элемент `xsl:on-completion` был последним в теле инструкции [`xsl:iterate`](xsl-iterate.md). Это вызывало проблемы с областью видимости локальных переменных, поэтому в окончательной версии Рекомендации элемент `xsl:on-completion` стоит на первом месте. Новое правило было реализовано в Saxon 9.7. Спецификация также была изменена, чтобы уточнить, что `xsl:on-completion` оценивается, если входная последовательность `xsl:iterate` пуста.

## Подробности

Во время выполнения `xsl:on-completion` не существует элемента контекста, позиции или размера; инструкция имеет доступ к параметрам итерации со значениями, заданными на последней итерации (или начальными значениями элементов [`xsl:param`](xsl-param.md), если входная последовательность была пустой). Для получения более подробной информации смотрите `xsl:iterate`.

## Ссылки

-   [XSLT 3.0 Specification](http://www.w3.org/TR/xslt-30/#element-on-completion)
-   [Saxon](https://www.saxonica.com/html/documentation/xsl-elements/on-completion.html)

## См. также

-   [`xsl:iterate`](xsl-iterate.md)
